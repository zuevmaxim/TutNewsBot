import unittest

from ai.ai import should_skip_text

TEXT_MAX_HYPE_TEXT_LENGTH = 500


class TestFiltering(unittest.TestCase):
    def test_should_not_skip_1(self):
        self.assertFalse(should_skip_text("""
        –ö–∞–∫ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –ø–µ—Ä–≤–æ–º—É –ø–æ—Ö–æ–¥—É, —á—Ç–æ–±—ã –≤—Å—ë –ø—Ä–æ—à–ª–æ –≥–ª–∞–¥–∫–æ

        –°–æ—Å—Ç–∞–≤–∏–ª–∏ –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤–º–µ—Å—Ç–µ —Å –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º ¬´–¢—É—Ä–∏–∑–º –∏ –∏–Ω–¥—É—Å—Ç—Ä–∏—è –≥–æ—Å—Ç–µ–ø—Ä–∏–∏–º—Å—Ç–≤–∞¬ª.
        
        https://lh.su/2u0r""", max_length=TEXT_MAX_HYPE_TEXT_LENGTH))

    def test_should_not_skip_2(self):
        self.assertFalse(should_skip_text("""
        –ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å –º–∏–∫—Ä–æ–∫–ª–∏–º–∞—Ç –≤ –∫–≤–∞—Ä—Ç–∏—Ä–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–º –¥–ª—è —Å–µ–±—è –∏ –¥–µ—Ç–µ–π

        –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –ø—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏–µ –Ω–µ –≤—Å–µ–≥–¥–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –≤—ã –¥—ã—à–∏—Ç–µ –¥–æ–º–∞ —á–∏—Å—Ç—ã–º –≤–æ–∑–¥—É—Ö–æ–º.
        
        https://lh.su/2ud4
        
        üò∂ –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è | –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å
        """, max_length=TEXT_MAX_HYPE_TEXT_LENGTH))

    def test_should_not_skip_3(self):
        self.assertFalse(should_skip_text("""
        –ö–∞–∫ –Ω–∞–≤–æ–¥–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –≤ –¥–æ–º–µ –±–µ–∑ –ª–∏—à–Ω–∏—Ö —É—Å–∏–ª–∏–π

        –ü—Ä–µ–≤—Ä–∞—â–∞–µ–º —É–±–æ—Ä–∫—É –∏–∑ –æ–±—è–∑–∞–ª–æ–≤–∫–∏ –≤ –ø—Ä–∏—è—Ç–Ω–æ–µ –∑–∞–Ω—è—Ç–∏–µ.
        
        https://lh.su/2iq2
        
        üò∂ –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è | –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å
        """, max_length=TEXT_MAX_HYPE_TEXT_LENGTH))

    def test_should_not_skip_4(self):
        self.assertFalse(should_skip_text("–í–∏—Ç—Ç–æ—Ä–∏—è –ß–µ—Ä–µ—Ç—Ç–∏ (26) ‚ù§Ô∏è\n–•–æ—Ä–æ—à–∞!"))

    def test_should_not_skip_5(self):
        self.assertFalse(should_skip_text("""
        –ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å —Ö–æ—Ä–æ—à–∏–π —É—Ç—é–≥ –¥–ª—è –¥–æ–º–∞

        –†–∞—Å—Å–∫–∞–∂–µ–º, –∫–∞–∫ —Å—ç–∫–æ–Ω–æ–º–∏—Ç—å –Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö –∏ –Ω–µ –∏—Å–ø–æ—Ä—Ç–∏—Ç—å –≤–µ—â–∏.
        
        –ß–∏—Ç–∞—Ç—å ‚Üí
        
        üò∂ –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è | –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å
        """))

    def test_should_not_skip_6(self):
        self.assertFalse(should_skip_text("–í—Å—Ç—Ä–µ—á–∞ –Ω–µ–¥–µ–ª–∏ ü§ç"))

    def test_should_not_skip_7(self):
        self.assertFalse(should_skip_text("""
        10 –ø—Ä–∏–≤—ã—á–Ω—ã—Ö –º—ã—Å–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞—Å—Ç–∞–≤–ª—è—é—Ç –∑—Ä—è —Ç—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è

        –ò–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –Ω–∏—Ö –ø–æ–º–æ–∂–µ—Ç –æ–¥–Ω–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ.
        
        –ß–∏—Ç–∞—Ç—å ‚Üí
        
        üò∂ –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è | –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å
        """))

    def test_should_not_skip_8(self):
        self.assertFalse(should_skip_text("–í–º–µ—Å—Ç–µ üñ§"))

    def test_skip_comment_hype_1(self):
        self.assertTrue(should_skip_text("–û–ø–∏—à–∏—Ç–µ –≤–∞—à–∏ –≤—ã—Ö–æ–¥–Ω—ã–µ –æ–¥–Ω–∏–º —Å—Ç–∏–∫–µ—Ä–æ–º –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö üëá"))

    def test_skip_comment_hype_2(self):
        self.assertTrue(should_skip_text("""
        –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ —Ñ—Ä–∞–∑—É –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö üëáüèª

        –•–æ—á–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–æ–≥–æ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–≥–æ...
        """))

    def test_skip_comment_hype_3(self):
        self.assertTrue(should_skip_text("""
        X —Ä–∞—Å—Å–∫–∞–∑–∞–ª –æ —Ç–≤–æ—Ä—á–µ—Å–∫–æ–º –∫—Ä–∏–∑–∏—Å–µ –∏ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö —Ä–µ–ª–∏–∑–∞—Ö

        –ß—Ç–æ –¥—É–º–∞–µ—Ç–µ?
        """))

    def test_skip_comment_hype_3(self):
        self.assertTrue(should_skip_text("–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫. –ú–Ω–µ–Ω–∏—è?"))

    def test_skip_emoji_hype_1(self):
        self.assertTrue(should_skip_text("""
        –ß–µ–º –≤—ã –æ–±—ã—á–Ω–æ –∑–∞–≤—Ç—Ä–∞–∫–∞–µ—Ç–µ? 

        ‚ù§Ô∏è ‚Äî —á–µ–º-–Ω–∏–±—É–¥—å —Å–ª–∞–¥–∫–∏–º
        üëç ‚Äî —á–µ–º-–Ω–∏–±—É–¥—å —Å–æ–ª—ë–Ω—ã–º 
        üíÖüèª ‚Äî –∫–∞–∫ –ø–æ–ª—É—á–∏—Ç—Å—è 
        üåö ‚Äî –¥–∞ –∫—Ç–æ —Ç–∞–∫–æ–π —ç—Ç–æ—Ç –≤–∞—à –∑–∞–≤—Ç—Ä–∞–∫?
        """))

    def test_skip_emoji_hype_2(self):
        self.assertTrue(should_skip_text("""
        –û—Å–µ–Ω–Ω–∏–π –æ–ø—Ä–æ—Å: –≤—ã —É–∂–µ –¥–æ—Å—Ç–∞–ª–∏ —Ç—ë–ø–ª—ã–µ –≤–µ—â–∏? 

        ‚ù§Ô∏è ‚Äî –¥–∞
        üíÖüèª ‚Äî —É –º–µ–Ω—è –≤–æ–æ–±—â–µ-—Ç–æ 48-–µ –∞–≤–≥—É—Å—Ç–∞
        üåö ‚Äî –±—É–¥—É —Ç–µ—Ä–ø–µ—Ç—å –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–µ–ª—ë–Ω–æ–≥–æ –ª–∏—Å—Ç–∏–∫–∞
        """))

    def test_skip_emoji_hype_3(self):
        self.assertTrue(should_skip_text("""
        –í –∫–∞–∫–æ–º –≤—ã –∫–ª—É–±–µ?

        ‚ù§Ô∏è ‚Äî –¥–æ—Å—Ç–∞–≤–∫–∏ 
        üíÖüèª ‚Äî –≥–æ—Ç–æ–≤–∫–∞ 
        üåö ‚Äî –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
        """))

    def test_should_not_skip_long_messsages(self):
        message = "–ß—Ç–æ –≤—ã –¥–µ–ª–∞–µ—Ç–µ –ø–æ —É—Ç—Ä–∞–º? –û—Å—Ç–∞–≤—å—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π"
        message = "\n".join(message for _ in range(20))
        self.assertFalse(should_skip_text(message))
