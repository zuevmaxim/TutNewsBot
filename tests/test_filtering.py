import unittest

from ai.ai import should_skip_text


class TestFiltering(unittest.TestCase):
    def test_should_not_skip(self):
        self.assertFalse(should_skip_text("""
        –ö–∞–∫ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –ø–µ—Ä–≤–æ–º—É –ø–æ—Ö–æ–¥—É, —á—Ç–æ–±—ã –≤—Å—ë –ø—Ä–æ—à–ª–æ –≥–ª–∞–¥–∫–æ

        –°–æ—Å—Ç–∞–≤–∏–ª–∏ –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤–º–µ—Å—Ç–µ —Å –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º ¬´–¢—É—Ä–∏–∑–º –∏ –∏–Ω–¥—É—Å—Ç—Ä–∏—è –≥–æ—Å—Ç–µ–ø—Ä–∏–∏–º—Å—Ç–≤–∞¬ª.
        
        https://lh.su/2u0r"""))

    def test_skip_comment_hype_1(self):
        self.assertTrue(should_skip_text("–û–ø–∏—à–∏—Ç–µ –≤–∞—à–∏ –≤—ã—Ö–æ–¥–Ω—ã–µ –æ–¥–Ω–∏–º —Å—Ç–∏–∫–µ—Ä–æ–º –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö üëá"))

    def test_skip_comment_hype_2(self):
        self.assertTrue(should_skip_text("""
        –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ —Ñ—Ä–∞–∑—É –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö üëáüèª

        –•–æ—á–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–æ–≥–æ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–≥–æ...
        """))

    def test_skip_emoji_hype_1(self):
        self.assertTrue(should_skip_text("""
        –ß–µ–º –≤—ã –æ–±—ã—á–Ω–æ –∑–∞–≤—Ç—Ä–∞–∫–∞–µ—Ç–µ? 

        ‚ù§Ô∏è ‚Äî —á–µ–º-–Ω–∏–±—É–¥—å —Å–ª–∞–¥–∫–∏–º
        üëç ‚Äî —á–µ–º-–Ω–∏–±—É–¥—å —Å–æ–ª—ë–Ω—ã–º 
        üíÖüèª ‚Äî –∫–∞–∫ –ø–æ–ª—É—á–∏—Ç—Å—è 
        üåö ‚Äî –¥–∞ –∫—Ç–æ —Ç–∞–∫–æ–π —ç—Ç–æ—Ç –≤–∞—à –∑–∞–≤—Ç—Ä–∞–∫?
        """))

    def test_skip_emoji_hype_2(self):
        self.assertTrue(should_skip_text("""
        –û—Å–µ–Ω–Ω–∏–π –æ–ø—Ä–æ—Å: –≤—ã —É–∂–µ –¥–æ—Å—Ç–∞–ª–∏ —Ç—ë–ø–ª—ã–µ –≤–µ—â–∏? 

        ‚ù§Ô∏è ‚Äî –¥–∞
        üíÖüèª ‚Äî —É –º–µ–Ω—è –≤–æ–æ–±—â–µ-—Ç–æ 48-–µ –∞–≤–≥—É—Å—Ç–∞
        üåö ‚Äî –±—É–¥—É —Ç–µ—Ä–ø–µ—Ç—å –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–µ–ª—ë–Ω–æ–≥–æ –ª–∏—Å—Ç–∏–∫–∞
        """))

    def test_should_not_skip_long_messsages(self):
        message = "–ß—Ç–æ –≤—ã –¥–µ–ª–∞–µ—Ç–µ –ø–æ —É—Ç—Ä–∞–º? –û—Å—Ç–∞–≤—å—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π"
        message = "\n".join(message for _ in range(20))
        self.assertFalse(should_skip_text(message))
